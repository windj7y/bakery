(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34ff84b8"],{"84af":function(t,s,i){"use strict";var a=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{class:"jumbotron jumbotron-fluid d-flex align-items-end "+t.bannerData.class+" mb-0"},[i("div",{staticClass:"container"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-4"},[i("div",{staticClass:"bg-bright p-3"},[i("h2",{staticClass:"text-center products-banner-text mb-0"},[t._v(t._s(t.bannerData.title))])])])])])])},e=[],o={props:["bannerData"]},n=o,c=i("2877"),r=Object(c["a"])(n,a,e,!1,null,null,null);s["a"]=r.exports},a09f:function(t,s,i){"use strict";i.r(s);var a=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[i("loading",{attrs:{active:t.isLoading},on:{"update:active":function(s){t.isLoading=s}}}),i("Banner",{attrs:{bannerData:t.bannerData}}),i("div",{staticClass:"bg-light-gray p-4"},[i("div",{staticClass:"container pt-4"},[0===t.favorites.length?i("div",{staticClass:"mb-5"},[i("p",{staticClass:"h3 text-center"},[t._v(" 您的收藏目前是空的，快前往"),i("router-link",{staticClass:"buy",attrs:{to:"/products"}},[t._v("商品區")]),t._v("逛逛吧！ ")],1)]):i("div",[i("h3",{staticClass:"favorite-title pb-3 mb-5"},[t._v("收藏清單")]),i("div",{staticClass:"row mb-4"},t._l(t.favorites,(function(s){return i("div",{key:s.id,staticClass:"col-md-3 mb-4"},[i("div",{staticClass:"card text-center border-0 h-100 shadow-sm"},[i("a",{staticClass:"heart-icon",attrs:{href:"#"},on:{click:function(i){return i.preventDefault(),t.removeFavorite(s.id)}}},[i("i",{staticClass:"fas fa-heart fa-lg"})]),i("img",{staticClass:"card-img-top py-3",attrs:{src:s.imageUrl[0],alt:s.title}}),i("div",{staticClass:"card-body"},[i("h5",{staticClass:"card-title font-weight-bold"},[t._v(t._s(s.title))]),i("p",{staticClass:"card-text font-weight-bold price"},[t._v("NT$ "+t._s(t._f("money")(s.price)))])]),i("div",{staticClass:"card-footer d-flex justify-content-between"},[i("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(i){return t.goProduct(s.id)}}},[t._v("了解更多")]),i("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:t.loadingItem===s.id},on:{click:function(i){return t.addCart(s.id)}}},[t.loadingItem===s.id?i("span",[i("span",{staticClass:"spinner-border spinner-border-sm"}),t._v(" 加入中 ")]):i("span",[t._v("加入購物車")])])])])])})),0)]),i("h3",{staticClass:"mb-4 pl-2 product-title"},[t._v("人氣商品")]),i("div",{staticClass:"mb-4"},[t.hotProducts.length?i("VueSlickCarousel",t._b({},"VueSlickCarousel",t.settings,!1),t._l(t.hotProducts,(function(s){return i("div",{key:s.id,staticClass:"p-3"},[i("div",{staticClass:"card text-center border-0 h-100 shadow-sm"},[i("router-link",{staticClass:"product",attrs:{to:"/product/"+s.id}},[i("img",{staticClass:"card-img-top py-3",attrs:{src:s.imageUrl[0],alt:s.title}}),i("div",{staticClass:"card-body"},[i("h5",{staticClass:"card-title font-weight-bold"},[t._v(t._s(s.title))]),i("p",{staticClass:"card-text font-weight-bold price"},[t._v("NT$ "+t._s(t._f("money")(s.price)))])])])],1)])})),0):t._e()],1)])]),i("NoticeModal",{attrs:{notice:t.notice}})],1)},e=[],o=(i("99af"),i("4de4"),i("c975"),i("a434"),i("3835")),n=i("a7ab"),c=i.n(n),r=(i("7b8d"),i("6a2c"),i("84af")),l=i("db3f"),d={components:{VueSlickCarousel:c.a,Banner:r["a"],NoticeModal:l["a"]},data:function(){return{products:[],hotProducts:[],favorites:[],favoriteList:JSON.parse(localStorage.getItem("favoriteList"))||[],notice:{msg:"",class:""},bannerData:{title:"我的收藏",class:"cart-banner"},settings:{dots:!1,infinite:!1,speed:500,slidesToShow:4,slidesToScroll:4,initialSlide:0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0}},{breakpoint:767,settings:{slidesToShow:2,slidesToScroll:2,initialSlide:2}},{breakpoint:623,settings:{slidesToShow:1,slidesToScroll:1}}]},isLoading:!1,loadingItem:""}},methods:{getProducts:function(){var t=this;this.isLoading=!0;var s="".concat("https://course-ec-api.hexschool.io/","api/").concat("4e04c0f4-4640-4a82-9572-23fa0dfcbfa2","/ec/products");this.$http.get(s).then((function(s){t.products=s.data.data,t.products=JSON.parse(JSON.stringify(t.products.sort((function(t,s){return t.options.order-s.options.order})))),t.hotProducts=t.products.filter((function(t){return t.options.isHot})),t.getFavorites(),t.isLoading=!1})).catch((function(){t.notice.msg="無法取得商品清單",t.notice.class="error",$("#noticeModal").modal("show"),setTimeout((function(){$("#noticeModal").modal("hide")}),1e3),t.isLoading=!1}))},getFavorites:function(){var t=this;this.favorites=this.products.filter((function(s){return t.favoriteList.indexOf(s.id)>-1}))},goProduct:function(t){this.$router.push("/product/".concat(t))},addCart:function(t){var s=this;this.loadingItem=t;var i="".concat("https://course-ec-api.hexschool.io/","api/").concat("4e04c0f4-4640-4a82-9572-23fa0dfcbfa2","/ec/shopping"),a={product:t,quantity:1};this.$http.post(i,a).then((function(){s.loadingItem="",s.notice.msg="已加入購物車，請點選上方購物車進行結帳。",s.notice.class="success",$("#noticeModal").modal("show"),setTimeout((function(){$("#noticeModal").modal("hide")}),1e3),s.$bus.$emit("updateQuantity",a.quantity)})).catch((function(t){s.loadingItem="";var i=Object(o["a"])(t.response.data.errors,1);s.notice.msg=i[0],s.notice.class="error",$("#noticeModal").modal("show"),setTimeout((function(){$("#noticeModal").modal("hide")}),1e3)}))},removeFavorite:function(t){var s=this.favoriteList.indexOf(t);-1!==s&&(this.favoriteList.splice(s,1),this.getFavorites(),this.notice.msg="已取消收藏。",this.notice.class="success"),localStorage.setItem("favoriteList",JSON.stringify(this.favoriteList)),$("#noticeModal").modal("show"),setTimeout((function(){$("#noticeModal").modal("hide")}),1e3)}},created:function(){this.getProducts()}},u=d,f=i("2877"),p=Object(f["a"])(u,a,e,!1,null,null,null);s["default"]=p.exports}}]);
//# sourceMappingURL=chunk-34ff84b8.f554e977.js.map