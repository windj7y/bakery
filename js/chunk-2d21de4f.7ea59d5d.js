(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21de4f"],{d2f1:function(t,i,o){"use strict";o.r(i);var s=function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",[o("loading",{attrs:{active:t.isLoading},on:{"update:active":function(i){t.isLoading=i}}}),o("div",{staticClass:"container my-4"},[o("div",{staticClass:"row mb-4"},[o("div",{staticClass:"col-md-6 mb-4"},[o("img",{staticClass:"img-fluid",attrs:{src:t.product.imageUrl[0],alt:t.product.title}})]),o("div",{staticClass:"col-md-6"},[o("div",{staticClass:"p-4 d-flex flex-column justify-content-center"},[o("h2",{staticClass:"font-weight-bold mb-3"},[t._v(t._s(t.product.title))]),o("p",{staticClass:"about-desc"},[t._v(" "+t._s(t.product.description)+" ")]),o("div",{staticClass:"text-right mb-3"},[t.product.origin_price&&t.product.origin_price!==t.product.price?o("p",{staticClass:"origin-price mb-0"},[t._v("NT$ "+t._s(t._f("money")(t.product.origin_price)))]):t._e(),t.product.price?o("p",{staticClass:"font-weight-bold price price-size"},[t._v("NT$ "+t._s(t._f("money")(t.product.price)))]):t._e()]),o("div",{staticClass:"d-flex justify-content-between mb-3"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.quantity,expression:"quantity"}],staticClass:"form-control quantity w-50 mr-4",attrs:{type:"number",name:"數量",min:"1"},domProps:{value:t.quantity},on:{change:function(i){return t.checkQuantity()},input:function(i){i.target.composing||(t.quantity=i.target.value)}}}),o("button",{staticClass:"btn btn-primary w-50",attrs:{type:"button",disabled:t.loadingItem===t.product.id},on:{click:function(i){return t.addCart(t.product.id)}}},[t.loadingItem===t.product.id?o("span",[o("span",{staticClass:"spinner-border spinner-border-sm"}),t._v(" 加入中 ")]):o("span",[t._v("加入購物車")])])]),o("div",{staticClass:"text-right"},[o("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:function(i){return t.updateFavorite(t.product.id)}}},[-1===t.favoriteList.indexOf(t.product.id)?o("span",[o("i",{staticClass:"far fa-heart"}),t._v(" 加入收藏 ")]):o("span",[o("i",{staticClass:"fas fa-heart"}),t._v(" 已加入收藏 ")])])])])])])]),o("div",{staticClass:"bg-light-gray p-5"},[o("div",{staticClass:"container"},[o("h3",{staticClass:"mb-4 pl-2 product-title"},[t._v("你可能也會喜歡")]),o("div",{staticClass:"mb-4"},[t.products.length?o("VueSlickCarousel",t._b({},"VueSlickCarousel",t.settings,!1),t._l(t.products,(function(i){return o("div",{key:i.id,staticClass:"p-3"},[o("div",{staticClass:"card text-center border-0 h-100 shadow-sm"},[o("router-link",{staticClass:"product",attrs:{to:"/product/"+i.id}},[o("img",{staticClass:"card-img-top py-3",attrs:{src:i.imageUrl[0],alt:i.title}}),o("div",{staticClass:"card-body"},[o("h5",{staticClass:"card-title font-weight-bold"},[t._v(t._s(i.title))]),o("p",{staticClass:"card-text font-weight-bold price"},[t._v("NT$ "+t._s(t._f("money")(i.price)))])])])],1)])})),0):t._e()],1)])]),o("NoticeModal",{attrs:{notice:t.notice}})],1)},e=[],a=(o("99af"),o("4de4"),o("c975"),o("a434"),o("3835")),c=o("a7ab"),n=o.n(c),r=(o("7b8d"),o("6a2c"),o("db3f")),d={components:{VueSlickCarousel:n.a,NoticeModal:r["a"]},data:function(){return{products:[],product:{imageUrl:[]},notice:{msg:"",class:""},quantity:1,settings:{dots:!1,infinite:!1,speed:500,slidesToShow:4,slidesToScroll:4,initialSlide:0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,infinite:!0}},{breakpoint:767,settings:{slidesToShow:2,slidesToScroll:2,initialSlide:2}},{breakpoint:623,settings:{slidesToShow:1,slidesToScroll:1}}]},favoriteList:JSON.parse(localStorage.getItem("favoriteList"))||[],isLoading:!1,loadingItem:""}},methods:{getProduct:function(){var t=this,i=this.$route.params.id,o="".concat("https://course-ec-api.hexschool.io/","api/").concat("4e04c0f4-4640-4a82-9572-23fa0dfcbfa2","/ec/product/").concat(i);this.$http.get(o).then((function(i){t.product=i.data.data,t.getProducts(t.product.category,t.product.id)})).catch((function(){t.notice.msg="無法取得商品資料",t.notice.class="error",$("#noticeModal").modal("show"),setTimeout((function(){$("#noticeModal").modal("hide")}),1e3)}))},getProducts:function(t,i){var o=this;this.isLoading=!0;var s="".concat("https://course-ec-api.hexschool.io/","api/").concat("4e04c0f4-4640-4a82-9572-23fa0dfcbfa2","/ec/products");this.$http.get(s).then((function(s){o.products=s.data.data,o.products=o.products.sort((function(t,i){return t.options.order-i.options.order})),o.products=o.products.filter((function(o){return o.category===t&&o.id!==i})),o.isLoading=!1})).catch((function(){o.notice.msg="無法取得商品清單",o.notice.class="error",$("#noticeModal").modal("show"),setTimeout((function(){$("#noticeModal").modal("hide")}),1e3),o.isLoading=!1}))},addCart:function(t){var i=this;this.loadingItem=t;var o="".concat("https://course-ec-api.hexschool.io/","api/").concat("4e04c0f4-4640-4a82-9572-23fa0dfcbfa2","/ec/shopping"),s={product:t,quantity:this.quantity};this.$http.post(o,s).then((function(){i.loadingItem="",i.notice.msg="已加入購物車，請點選上方購物車進行結帳。",i.notice.class="success",$("#noticeModal").modal("show"),setTimeout((function(){$("#noticeModal").modal("hide")}),1e3),i.$bus.$emit("updateQuantity",1)})).catch((function(t){i.loadingItem="";var o=Object(a["a"])(t.response.data.errors,1);i.notice.msg=o[0],i.notice.class="error",$("#noticeModal").modal("show"),setTimeout((function(){$("#noticeModal").modal("hide")}),1e3)}))},checkQuantity:function(){var t=this;this.quantity<=0&&(this.notice.msg="數量不可小於1",this.notice.class="error",$("#noticeModal").modal("show"),setTimeout((function(){$("#noticeModal").modal("hide"),t.quantity=1}),1e3))},updateFavorite:function(t){var i=this.favoriteList.indexOf(t);-1===i?(this.favoriteList.push(t),this.notice.msg="已加入收藏。",this.notice.class="success"):(this.favoriteList.splice(i,1),this.notice.msg="已取消收藏。",this.notice.class="success"),localStorage.setItem("favoriteList",JSON.stringify(this.favoriteList)),$("#noticeModal").modal("show"),setTimeout((function(){$("#noticeModal").modal("hide")}),1e3)}},created:function(){this.getProduct()},watch:{$route:function(){document.body.scrollTop=0,document.documentElement.scrollTop=0,this.getProduct()}}},l=d,u=o("2877"),p=Object(u["a"])(l,s,e,!1,null,null,null);i["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d21de4f.7ea59d5d.js.map